# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Nitro-based API project. Nitro is a full-stack server framework by UnJS that provides a unified API for server-side development.

## Architecture

- **Framework**: Nitro (nitropack)
- **Source Directory**: `server/` (configured in nitro.config.ts)
- **Routes**: Located in `server/routes/` directory
- **Build Output**: `.output/` directory (generated during build)

## Development Commands

```bash
# Start development server
pnpm dev

# Build for production
pnpm build

# Preview production build
pnpm preview

# Prepare Nitro environment
pnpm prepare
```

## API Endpoints

### `/api/search`
- **Method**: GET
- **Parameters**: 
  - `q` (required): Search query/prompt for dishes
  - `location` (required): Location to search in
- **Description**: Searches for dishes at restaurants using Toast menu API
- **Response**: Returns array of matching dishes with restaurant information

## Key Files

- `nitro.config.ts`: Nitro configuration with source directory set to `server/`
- `server/routes/index.ts`: Main route handler (currently returns a simple message)
- `server/routes/api/search.ts`: Dish search API endpoint with Toast integration
- `tsconfig.json`: TypeScript configuration that extends Nitro's generated types
- `.env.example`: Example environment variables for Toast API configuration

## Environment Variables

### AI Service Configuration (Vercel AI SDK 5)
- `AI_PROVIDER`: AI service provider (`gateway` [default], `openai`, `anthropic`, `google`)
- `AI_GATEWAY_MODEL`: Model to use with Vercel AI Gateway (e.g., `openai/gpt-3.5-turbo`)
- `AI_API_KEY`: API key for direct provider access (not needed for gateway)

### Vercel AI Gateway (Recommended)
The API uses Vercel AI Gateway by default, providing:
- Access to 100+ AI models without managing API keys
- Built-in authentication, rate limiting, and usage tracking
- Easy model switching and load balancing

For local development: Run `vc env pull` to get authentication token
For production: Deploy to Vercel for automatic authentication

## Development Notes

- Routes are automatically discovered in the `server/routes/` directory
- TypeScript types are automatically generated by Nitro in `.nitro/types/`
- The project uses pnpm as package manager
- Toast API integration includes fallback to mock data if API calls fail